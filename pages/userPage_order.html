<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>我的</title>
    <link rel="stylesheet" href="../source/mui/css/mui.css">
    <link rel="stylesheet" href="../source/css/mui_overwrite.css">
    <link rel="stylesheet" href="../source/css/public.css">
    <script src="../source/js/jquery-1.11.1.min.js"></script>
    <script src="../source/mui/js/mui.js"></script>
    <script src="../source/mui/js/mui.pullToRefresh.js"></script>
    <script src="../source/mui/js/mui.pullToRefresh.material.js"></script>
    <script src="../source/js/public.js"></script>
    <script src="../source/js/vue.js"></script>
    <script src="../source/js/ajax.js"></script>
    <script src="../source/js/ajax_my.js"></script>
    <style>
    .mui-control-content {
        min-height: 215px;
    }
    
    .mui-control-content .mui-loading {
        margin-top: 50px;
    }
    
    .mui-bar~.mui-content .mui-fullscreen {
        top: 44px;
        height: auto;
    }
    
    .mui-pull-top-tips {
        position: absolute;
        top: -20px;
        left: 50%;
        margin-left: -25px;
        width: 40px;
        height: 40px;
        border-radius: 100%;
        z-index: 1;
    }
    
    .mui-bar~.mui-pull-top-tips {
        top: 24px;
    }
    
    .mui-pull-top-wrapper {
        width: 42px;
        height: 42px;
        display: block;
        text-align: center;
        background-color: #efeff4;
        border: 1px solid #ddd;
        border-radius: 25px;
        background-clip: padding-box;
        box-shadow: 0 4px 10px #bbb;
        overflow: hidden;
    }
    
    .mui-pull-top-tips.mui-transitioning {
        -webkit-transition-duration: 200ms;
        transition-duration: 200ms;
    }
    
    .mui-pull-top-tips .mui-pull-loading {
        /*-webkit-backface-visibility: hidden;
                -webkit-transition-duration: 400ms;
                transition-duration: 400ms;*/
        margin: 0;
    }
    
    .mui-pull-top-wrapper .mui-icon,
    .mui-pull-top-wrapper .mui-spinner {
        margin-top: 7px;
    }
    
    .mui-pull-top-wrapper .mui-icon.mui-reverse {
        /*-webkit-transform: rotate(180deg) translateZ(0);*/
    }
    
    .mui-pull-bottom-tips {
        text-align: center;
        background-color: #efeff4;
        font-size: 15px;
        line-height: 40px;
        color: #777;
    }
    
    .mui-pull-top-canvas {
        overflow: hidden;
        background-color: #fafafa;
        border-radius: 40px;
        box-shadow: 0 4px 10px #bbb;
        width: 40px;
        height: 40px;
        margin: 0 auto;
    }
    
    .mui-pull-top-canvas canvas {
        width: 40px;
    }
    
    .mui-slider-indicator.mui-segmented-control {
        background-color: #efeff4;
    }
    </style>
</head>

<body>
    <div class="mui-content">
        <div id="slider" class="mui-slider mui-fullscreen">
            <div id="sliderSegmentedControl" class="mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
                <a class="mui-control-item mui-active">
                    全部
                </a>
                <a class="mui-control-item">
                    待下单
                </a>
                <a class="mui-control-item">
                    待发货
                </a>
                <a class="mui-control-item">
                    待收货
                </a>
                <a class="mui-control-item">
                    已完成
                </a>
            </div>
            <div class="mui-slider-group">
                <div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
                    <div id="scroll1" class="mui-scroll-wrapper">
                        <div class="mui-scroll">
                            <ul class="mui-table-view order-table-view" v-for="order in orders">
                                <li class="mui-table-view-cell first">
                                    <span class="textColor">订单号：{{order.tradeNumber}}</span>
                                    <span class="mui-pull-right blueColor">{{order.orderDescribe}}</span>
                                </li>
                                <li class="mui-table-view-cell second">
                                    <a href="indexPage_textbook.html">
                                        <div class="mui-table">
                                            <div class="mui-table-cell mui-col-xs-3">
                                                <img style="width: 80%;" src="../source/images/rect.jpg" />
                                            </div>
                                            <div class="mui-table-cell mui-col-xs-9">
                                                <h4 style="margin-bottom: 10px;font-size: 15px;" class="mui-ellipsis">信息化推进办公室张彦合同付款信息化</h4>
                                                <h6>申请人：李四</h6>
                                                <h6>出版社：浙江教育出版社</h6>
                                                <span class="mui-h4 linkColor">¥0.00</span>
                                                <span class="mui-h4 mui-pull-right">×1</span>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <li class="mui-table-view-cell third">
                                    <span class="textColor">共一件商品，合计：</span>
                                    <span class="blueColor">{{order.totalPrice|currency'¥'}}</span>
                                    <div class="mui-pull-right">
                                        <button data-cancelOrderButton type="button" class="mui-btn mui-btn-outlined mui-btn-short greyColor">
                                            取消订单
                                        </button>
                                        <div class="mui-btn mui-btn-primary mui-btn-short">
                                            立即付款
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <ul class="mui-table-view order-table-view">
                                <li class="mui-table-view-cell first">
                                    <span class="textColor">订单号：46518512787395</span>
                                    <span class="mui-pull-right blueColor">待下单</span>
                                </li>
                                <li class="mui-table-view-cell second">
                                    <a href="indexPage_textbook.html">
                                        <div class="mui-table">
                                            <div class="mui-table-cell mui-col-xs-3">
                                                <img style="width: 80%;" src="../source/images/rect.jpg" />
                                            </div>
                                            <div class="mui-table-cell mui-col-xs-9">
                                                <h4 style="margin-bottom: 10px;font-size: 15px;" class="mui-ellipsis">信息化推进办公室张彦合同付款信息化</h4>
                                                <h6>申请人：李四</h6>
                                                <h6>出版社：浙江教育出版社</h6>
                                                <span class="mui-h4 linkColor">¥0.00</span>
                                                <span class="mui-h4 mui-pull-right">×1</span>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <li class="mui-table-view-cell second">
                                    <a href="indexPage_textbook.html">
                                        <div class="mui-table">
                                            <div class="mui-table-cell mui-col-xs-3">
                                                <img style="width: 80%;" src="../source/images/rect.jpg" />
                                            </div>
                                            <div class="mui-table-cell mui-col-xs-9">
                                                <h4 style="margin-bottom: 10px;font-size: 15px;" class="mui-ellipsis">信息化推进办公室张彦合同付款信息化</h4>
                                                <h6>申请人：李四</h6>
                                                <h6>出版社：浙江教育出版社</h6>
                                                <span class="mui-h4 linkColor">¥0.00</span>
                                                <span class="mui-h4 mui-pull-right">×1</span>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <li class="mui-table-view-cell third">
                                    <span class="textColor">共一件商品，合计：</span>
                                    <span class="blueColor">¥ 0.00</span>
                                    <div class="mui-pull-right">
                                        <button data-cancelOrderButton type="button" class="mui-btn mui-btn-outlined mui-btn-short greyColor">
                                            取消订单
                                        </button>
                                        <div class="mui-btn mui-btn-primary mui-btn-short">
                                            立即付款
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="item2mobile" class="mui-slider-item mui-control-content">
                    <div class="mui-scroll-wrapper">
                        <div class="mui-scroll">
                            <ul class="mui-table-view">
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="item3mobile" class="mui-slider-item mui-control-content">
                    <div class="mui-scroll-wrapper">
                        <div class="mui-scroll">
                            <ul class="mui-table-view">
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="item4mobile" class="mui-slider-item mui-control-content">
                    <div class="mui-scroll-wrapper">
                        <div class="mui-scroll">
                            <ul class="mui-table-view">
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="item5mobile" class="mui-slider-item mui-control-content">
                    <div class="mui-scroll-wrapper">
                        <div class="mui-scroll">
                            <ul class="mui-table-view">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
    mui.init();
    $(".mui-content").on('click', '[data-cancelOrderButton]', function() {
        var $this = $(this);
        mui.confirm("确定取消订单吗？", " ", ["<span class='textColor'>确定</span>", "不"], function(data) {
            if (!data.index) {
                $this.closest(".order-table-view").remove();
            }
        });
    });
    //阻尼系数
    var deceleration = mui.os.ios ? 0.003 : 0.0009;
    mui('.mui-scroll-wrapper').scroll({
        bounce: false,
        indicators: true, //是否显示滚动条
        deceleration: deceleration
    });
    mui.ready(function() {
        //循环初始化所有下拉刷新，上拉加载。
        mui.each(document.querySelectorAll('.mui-slider-group .mui-scroll'), function(index, pullRefreshEl) {
            mui(pullRefreshEl).pullToRefresh({
                down: {
                    callback: function() {
                        var self = this;
                        setTimeout(function() {
                            self.endPullDownToRefresh();
                        }, 1000);
                    }
                },
                up: {
                    callback: function() {
                        var self = this;
                        setTimeout(function() {
                            self.endPullUpToRefresh();
                        }, 1000);
                    }
                }
            });
        });
    });
    var vm = new Vue({
        el: "body",
        data: {
            orders: [],
            page: 1,
            orderStatus: 100
        },
        computed: {},
        methods: {},
        created: function() {
            var self = this;
            var id = localStorage.getItem("id");
            $.when(getOrderList(self.page, self.orderStatus)).done(function(data) {
                console.log(data);
                self.$data.orders = data.data.orders
            });
        },
        ready: function() {

        }
    })
    </script>
</body>

</html>
