<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>云书</title>
    <link rel="stylesheet" href="../source/mui/css/mui.css">
    <link rel="stylesheet" href="../source/css/mui_overwrite.css">
    <link rel="stylesheet" href="../source/css/public.css">
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script src="../source/js/jquery-1.11.1.min.js"></script>
    <script src="../source/mui/js/mui.js"></script>
    
    <!-- <script src="//npmcdn.com/vue/dist/vue.min.js"></script> -->
    <script src="../source/js/vue.js"></script>
    <script src="../source/js/ajax.js"></script>
    <script src="../source/js/ajax_my.js"></script>
    <script src="../source/js/public.js"></script>
    <script>
    $(function(){
        mui.init();
        var vm = new Vue({
            el: 'body',
            data: {
                couponList: []
            },
            methods: {
                getQueryParams: function(couponId){
                    return encodeURI(JSON.stringify({'couponId': couponId}));
                }
            },
            created: function(){
                var self = this;
                $.when(getCouponsList(1)).done(function(data){
                    if(data.resultCode == 200){
                        self.couponList = data.data.unexpiredCoupons;
                    }
                });
            }
        });
    });
    </script>
</head>
<body>
    <div class="mui-content" style="padding-bottom: 76px;">
        <div style="padding: 0 12px;">
            <div class="innerCenter" style="padding: 29px 0;">
                <div>
                    <a class="linkColor" data-href="userPage_coupon_add.html">
                        <img class="imageIcon" style="width: 21px; height: 21px;margin-right: 10px;position: relative;top: -1px;" src="../source/webslice/4.9_coupon/oval-696@3x.png" alt="">添加优惠券
                    </a>
                </div>
            </div>
            <div id="couponsList">
                <div class="coupon" v-for="coupon in couponList" data-href="userPage_coupon_detail.html?{{getQueryParams(coupon.id)}}">
                    <div class="couponBody" :style="{backgroundColor: '#'+coupon.backgroundColor, backgroundImage: 'url('+coupon.backgroundImg+')'}">
                        <img class="mui-pull-left" :src="coupon.logo" alt="">
                        <div class="mui-pull-right" style="text-align: right;">
                            <h5 style="color: #fff;font-size: 16px;margin-top: 10px;">{{coupon.powerValue}}</h5>
                            <h5 style="color: rgba(255,255,255,0.6);font-size: 16px;margin-top: 15px;">{{coupon.shopName}}</h5>
                        </div>
                    </div>
                    <div class="couponFoot">
                        <span class="mui-h5 mui-ellipsis">{{coupon.timeDesc?coupon.timeDesc:coupon.useDesc}}</span>
                    </div>
                </div>
            </div>
            <div class="innerCenter" style="padding: 15px 0 10px;position: fixed; bottom: 0;width: 100%;left: 0;height: 56px;background-color: #eee;">
                <div>
                    <p>
                        <a style="color: inherit;padding: 10px 0;" data-href="http://h5.qess.me/help/couponProblem.html">优惠券说明</a>
                        ｜
                        <a style="color: inherit;padding: 10px 0;" data-href="userPage_coupon_expired.html">过期优惠券</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>
<html>