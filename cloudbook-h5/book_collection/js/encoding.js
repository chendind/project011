"undefined"!==typeof module&&module.exports&&(this["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]);
(function(r){function g(a,f,b){return f<=a&&a<=b}function A(a){if(void 0===a)return{};if(a===Object(a))return a;throw TypeError("Could not convert argument to dictionary");}function u(a){return 0<=a&&127>=a}function D(a){this.tokens=[].slice.call(a);this.tokens.reverse()}function l(a,f){if(a)throw TypeError("Decoder error");return f||65533}function t(a){throw TypeError("The code point "+a+" could not be encoded.");}function E(a){a=String(a).trim().toLowerCase();return Object.prototype.hasOwnProperty.call(F,
a)?F[a]:null}function y(a,f){return f?f[a]||null:null}function x(a,f){var b=f.indexOf(a);return-1===b?null:b}function p(a){if(!("encoding-indexes"in r))throw Error("Indexes missing. Did you forget to include encoding-indexes.js?");return r["encoding-indexes"][a]}function z(a,f){if(!(this instanceof z))throw TypeError("Called as a function. Did you forget 'new'?");a=void 0!==a?String(a):"utf-8";f=A(f);this._decoder=this._encoding=null;this._BOMseen=this._ignoreBOM=!1;this._error_mode="replacement";
this._do_not_flush=!1;var b=E(a);if(null===b||"replacement"===b.name)throw RangeError("Unknown encoding: "+a);if(!n[b.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");this._encoding=b;Boolean(f.fatal)&&(this._error_mode="fatal");Boolean(f.ignoreBOM)&&(this._ignoreBOM=!0);Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase(),this.fatal="fatal"===this._error_mode,this.ignoreBOM=this._ignoreBOM);return this}function B(a,f){if(!(this instanceof
B))throw TypeError("Called as a function. Did you forget 'new'?");f=A(f);this._encoder=this._encoding=null;this._do_not_flush=!1;this._fatal=Boolean(f.fatal)?"fatal":"replacement";if(Boolean(f.NONSTANDARD_allowLegacyEncoding)){a=void 0!==a?String(a):"utf-8";var b=E(a);if(null===b||"replacement"===b.name)throw RangeError("Unknown encoding: "+a);if(!q[b.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");this._encoding=b}else this._encoding=E("utf-8"),void 0!==a&&
"console"in r&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase());return this}function L(a){var f=a.fatal,b=0,d=0,c=0,m=128,e=191;this.handler=function(a,k){if(-1===k&&0!==c)return c=0,l(f);if(-1===k)return-1;if(0===c){if(g(k,0,127))return k;if(g(k,194,223))c=1,b=k&31;else if(g(k,224,239))224===k&&(m=160),237===k&&(e=159),c=2,b=k&15;else if(g(k,240,244))240===k&&(m=144),244===k&&(e=143),c=3,
b=k&7;else return l(f);return null}if(!g(k,m,e))return b=c=d=0,m=128,e=191,a.prepend(k),l(f);m=128;e=191;b=b<<6|k&63;d+=1;if(d!==c)return null;var p=b;b=c=d=0;return p}}function M(a){this.handler=function(a,b){if(-1===b)return-1;if(g(b,0,127))return b;var d,c;g(b,128,2047)?(d=1,c=192):g(b,2048,65535)?(d=2,c=224):g(b,65536,1114111)&&(d=3,c=240);for(c=[(b>>6*d)+c];0<d;)c.push(128|b>>6*(d-1)&63),--d;return c}}function N(a,f){var b=f.fatal;this.handler=function(d,c){if(-1===c)return-1;if(u(c))return c;
var f=a[c-128];return null===f?l(b):f}}function O(a,f){this.handler=function(b,d){if(-1===d)return-1;if(v(d))return d;var c=x(d,a);null===c&&t(d);return c+128}}function G(a){var f=a.fatal,b=0,d=0,c=0;this.handler=function(a,e){if(-1===e&&0===b&&0===d&&0===c)return-1;-1!==e||0===b&&0===d&&0===c||(c=d=b=0,l(f));var h;if(0!==c){h=null;if(g(e,48,57))if(h=10*(126*(10*(b-129)+(d-48))+(c-129))+e-48,39419<h&&189E3>h||1237575<h)h=null;else if(7457===h)h=59335;else{var k=0,n=0,q=p("gb18030"),r;for(r=0;r<q.length;++r){var t=
q[r];if(t[0]<=h)k=t[0],n=t[1];else break}h=n+h-k}k=[d,c,e];c=d=b=0;return null===h?(a.prepend(k),l(f)):h}if(0!==d){if(g(e,129,254))return c=e,null;a.prepend([d,e]);d=b=0;return l(f)}if(0!==b){if(g(e,48,57))return d=e,null;h=b;k=null;b=0;n=127>e?64:65;if(g(e,64,126)||g(e,128,254))k=190*(h-129)+(e-n);h=null===k?null:y(k,p("gb18030"));null===h&&u(e)&&a.prepend(e);return null===h?l(f):h}return u(e)?e:128===e?8364:g(e,129,254)?(b=e,null):l(f)}}function H(a,f){this.handler=function(b,d){if(-1===d)return-1;
if(v(d))return d;if(58853===d)return t(d);if(f&&8364===d)return 128;var c=x(d,p("gb18030"));if(null!==c){var a=w(c/190)+129,c=c%190;return[a,c+(63>c?64:65)]}if(f)return t(d);if(59335===d)c=7457;else{var a=c=0,e=p("gb18030"),h;for(h=0;h<e.length;++h){var g=e[h];if(g[1]<=d)c=g[1],a=g[0];else break}c=a+d-c}a=w(c/10/126/10);c-=12600*a;e=w(c/10/126);c-=1260*e;h=w(c/10);return[a+129,e+48,h+129,c-10*h+48]}}function P(a){var f=a.fatal,b=0;this.handler=function(a,c){if(-1===c&&0!==b)return b=0,l(f);if(-1===
c&&0===b)return-1;if(0!==b){var m=b,e=null;b=0;var h=127>c?64:98;if(g(c,64,126)||g(c,161,254))e=157*(m-129)+(c-h);switch(e){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}m=null===e?null:y(e,p("big5"));null===m&&u(c)&&a.prepend(c);return null===m?l(f):m}return u(c)?c:g(c,129,254)?(b=c,null):l(f)}}function Q(a){this.handler=function(a,b){if(-1===b)return-1;if(v(b))return b;var d;var c=p("big5");d=9552===b||9566===b||9569===b||9578===b||21313===
b||21317===b?c.lastIndexOf(b):x(b,c);if(null===d)return t(b);c=w(d/157)+129;if(161>c)return t(b);d%=157;return[c,d+(63>d?64:98)]}}function R(a){var f=a.fatal,b=!1,d=0;this.handler=function(c,a){if(-1===a&&0!==d)return d=0,l(f);if(-1===a&&0===d)return-1;if(142===d&&g(a,161,223))return d=0,65377+a-161;if(143===d&&g(a,161,254))return b=!0,d=a,null;if(0!==d){var e=d;d=0;var h=null;g(e,161,254)&&g(a,161,254)&&(h=y(94*(e-161)+(a-161),p(b?"jis0212":"jis0208")));b=!1;g(a,161,254)||c.prepend(a);return null===
h?l(f):h}return u(a)?a:142===a||143===a||g(a,161,254)?(d=a,null):l(f)}}function S(a){this.handler=function(a,b){if(-1===b)return-1;if(v(b))return b;if(165===b)return 92;if(8254===b)return 126;if(g(b,65377,65439))return[142,b-65377+161];8722===b&&(b=65293);var d=x(b,p("jis0208"));return null===d?t(b):[w(d/94)+161,d%94+161]}}function T(a){var f=a.fatal,b=0,d=0,c=!1;this.handler=function(a,e){switch(b){default:case 0:if(27===e)return b=5,null;if(g(e,0,127)&&14!==e&&15!==e&&27!==e)return c=!1,e;if(-1===
e)return-1;c=!1;return l(f);case 1:if(27===e)return b=5,null;if(92===e)return c=!1,165;if(126===e)return c=!1,8254;if(g(e,0,127)&&14!==e&&15!==e&&27!==e&&92!==e&&126!==e)return c=!1,e;if(-1===e)return-1;c=!1;return l(f);case 2:if(27===e)return b=5,null;if(g(e,33,95))return c=!1,65377+e-33;if(-1===e)return-1;c=!1;return l(f);case 3:if(27===e)return b=5,null;if(g(e,33,126))return c=!1,d=e,b=4,null;if(-1===e)return-1;c=!1;return l(f);case 4:if(27===e)return b=5,l(f);if(g(e,33,126)){b=3;var h=y(94*(d-
33)+e-33,p("jis0208"));return null===h?l(f):h}if(-1===e)return b=3,a.prepend(e),l(f);b=3;return l(f);case 5:if(36===e||40===e)return d=e,b=6,null;a.prepend(e);c=!1;b=0;return l(f);case 6:h=d;d=0;var k=null;40===h&&66===e&&(k=0);40===h&&74===e&&(k=1);40===h&&73===e&&(k=2);36!==h||64!==e&&66!==e||(k=3);if(null!==k)return b=b=k,h=c,c=!0,h?l(f):null;a.prepend([h,e]);c=!1;b=0;return l(f)}}}function U(a){var f=0;this.handler=function(a,d){if(-1===d&&0!==f)return a.prepend(d),f=0,[27,40,66];if(-1===d&&0===
f)return-1;if(!(0!==f&&1!==f||14!==d&&15!==d&&27!==d))return t(65533);if(0===f&&v(d))return d;if(1===f&&(v(d)&&92!==d&&126!==d||165==d||8254==d)){if(v(d))return d;if(165===d)return 92;if(8254===d)return 126}if(v(d)&&0!==f)return a.prepend(d),f=0,[27,40,66];if((165===d||8254===d)&&1!==f)return a.prepend(d),f=1,[27,40,74];8722===d&&(d=65293);var c=x(d,p("jis0208"));return null===c?t(d):2!==f?(a.prepend(d),f=2,[27,36,66]):[w(c/94)+33,c%94+33]}}function V(a){var f=a.fatal,b=0;this.handler=function(a,
c){if(-1===c&&0!==b)return b=0,l(f);if(-1===c&&0===b)return-1;if(0!==b){var m=b,e=null;b=0;var h=127>c?64:65,k=160>m?129:193;if(g(c,64,126)||g(c,128,252))e=188*(m-k)+c-h;m=null===e?null:y(e,p("jis0208"));if(null===m&&null!==e&&g(e,8836,10528))return 57344+e-8836;null===m&&u(c)&&a.prepend(c);return null===m?l(f):m}return u(c)||128===c?c:g(c,161,223)?65377+c-161:g(c,129,159)||g(c,224,252)?(b=c,null):l(f)}}function W(a){this.handler=function(a,b){if(-1===b)return-1;if(v(b)||128===b)return b;if(165===
b)return 92;if(8254===b)return 126;if(g(b,65377,65439))return b-65377+161;8722===b&&(b=65293);var d;var c=x(b,p("jis0208"));d=null===c||g(c,8272,8835)?null:c;if(null===d)return t(b);c=w(d/188);d%=188;return[c+(31>c?129:193),d+(63>d?64:65)]}}function X(a){var f=a.fatal,b=0;this.handler=function(a,c){if(-1===c&&0!==b)return b=0,l(f);if(-1===c&&0===b)return-1;if(0!==b){var m=b,e=null;b=0;g(c,65,254)&&(e=190*(m-129)+(c-65));m=null===e?null:y(e,p("euc-kr"));null===e&&u(c)&&a.prepend(c);return null===m?
l(f):m}return u(c)?c:g(c,129,254)?(b=c,null):l(f)}}function Y(a){this.handler=function(a,b){if(-1===b)return-1;if(v(b))return b;var d=x(b,p("euc-kr"));return null===d?t(b):[w(d/190)+129,d%190+65]}}function C(a,f){var b=a>>8,d=a&255;return f?[b,d]:[d,b]}function I(a,f){var b=f.fatal,d=null,c=null;this.handler=function(f,e){if(-1===e&&(null!==d||null!==c))return l(b);if(-1===e&&null===d&&null===c)return-1;if(null===d)return d=e,null;var h;h=a?(d<<8)+e:(e<<8)+d;d=null;if(null!==c){var k=c;c=null;if(g(h,
56320,57343))return 65536+1024*(k-55296)+(h-56320);f.prepend(C(h,a));return l(b)}return g(h,55296,56319)?(c=h,null):g(h,56320,57343)?l(b):h}}function J(a,f){this.handler=function(b,d){if(-1===d)return-1;if(g(d,0,65535))return C(d,a);var c=C((d-65536>>10)+55296,a),f=C((d-65536&1023)+56320,a);return c.concat(f)}}function Z(a){this.handler=function(a,b){return-1===b?-1:u(b)?b:63360+b-128}}function aa(a){this.handler=function(a,b){return-1===b?-1:v(b)?b:g(b,63360,63487)?b-63360+128:t(b)}}var w=Math.floor,
v=u;D.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():-1},prepend:function(a){if(Array.isArray(a))for(;a.length;)this.tokens.push(a.pop());else this.tokens.push(a)},push:function(a){if(Array.isArray(a))for(;a.length;)this.tokens.unshift(a.shift());else this.tokens.unshift(a)}};var K=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],
name:"IBM866"},{labels:"csisolatin2 iso-8859-2 iso-ir-101 iso8859-2 iso88592 iso_8859-2 iso_8859-2:1987 l2 latin2".split(" "),name:"ISO-8859-2"},{labels:"csisolatin3 iso-8859-3 iso-ir-109 iso8859-3 iso88593 iso_8859-3 iso_8859-3:1988 l3 latin3".split(" "),name:"ISO-8859-3"},{labels:"csisolatin4 iso-8859-4 iso-ir-110 iso8859-4 iso88594 iso_8859-4 iso_8859-4:1988 l4 latin4".split(" "),name:"ISO-8859-4"},{labels:"csisolatincyrillic cyrillic iso-8859-5 iso-ir-144 iso8859-5 iso88595 iso_8859-5 iso_8859-5:1988".split(" "),
name:"ISO-8859-5"},{labels:"arabic asmo-708 csiso88596e csiso88596i csisolatinarabic ecma-114 iso-8859-6 iso-8859-6-e iso-8859-6-i iso-ir-127 iso8859-6 iso88596 iso_8859-6 iso_8859-6:1987".split(" "),name:"ISO-8859-6"},{labels:"csisolatingreek ecma-118 elot_928 greek greek8 iso-8859-7 iso-ir-126 iso8859-7 iso88597 iso_8859-7 iso_8859-7:1987 sun_eu_greek".split(" "),name:"ISO-8859-7"},{labels:"csiso88598e csisolatinhebrew hebrew iso-8859-8 iso-8859-8-e iso-ir-138 iso8859-8 iso88598 iso_8859-8 iso_8859-8:1988 visual".split(" "),
name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:"csisolatin6 iso-8859-10 iso-ir-157 iso8859-10 iso885910 l6 latin6".split(" "),name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:"csisolatin9 iso-8859-15 iso8859-15 iso885915 iso_8859-15 l9".split(" "),name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi",
"koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:"dos-874 iso-8859-11 iso8859-11 iso885911 tis-620 windows-874".split(" "),name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:"ansi_x3.4-1968 ascii cp1252 cp819 csisolatin1 ibm819 iso-8859-1 iso-ir-100 iso8859-1 iso88591 iso_8859-1 iso_8859-1:1987 l1 latin1 us-ascii windows-1252 x-cp1252".split(" "),
name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:"cp1254 csisolatin5 iso-8859-9 iso-ir-148 iso8859-9 iso88599 iso_8859-9 iso_8859-9:1989 l5 latin5 windows-1254 x-cp1254".split(" "),name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},
{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:"chinese csgb2312 csiso58gb231280 gb2312 gb_2312 gb_2312-80 gbk iso-ir-58 x-gbk".split(" "),name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese",
"euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:"csshiftjis ms932 ms_kanji shift-jis shift_jis sjis windows-31j x-sjis".split(" "),name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:"cseuckr csksc56011987 euc-kr iso-ir-149 korean ks_c_5601-1987 ks_c_5601-1989 ksc5601 ksc_5601 windows-949".split(" "),name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312",
"iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],F={};K.forEach(function(a){a.encodings.forEach(function(a){a.labels.forEach(function(b){F[b]=a})})});var q={},n={};Object.defineProperty&&(Object.defineProperty(z.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(z.prototype,
"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(z.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}}));z.prototype.decode=function(a,f){var b;b="object"===typeof a&&a instanceof ArrayBuffer?new Uint8Array(a):"object"===typeof a&&"buffer"in a&&a.buffer instanceof ArrayBuffer?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(0);f=A(f);this._do_not_flush||(this._decoder=n[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=
!1);this._do_not_flush=Boolean(f.stream);var d=new D(b);b=[];for(var c;;){c=d.read();if(-1===c)break;c=this._decoder.handler(d,c);if(-1===c)break;null!==c&&(Array.isArray(c)?b.push.apply(b,c):b.push(c))}if(!this._do_not_flush){do{c=this._decoder.handler(d,d.read());if(-1===c)break;null!==c&&(Array.isArray(c)?b.push.apply(b,c):b.push(c))}while(!d.endOfStream());this._decoder=null}-1===["UTF-8","UTF-16LE","UTF-16BE"].indexOf(this._encoding.name)||this._ignoreBOM||this._BOMseen||(0<b.length&&65279===
b[0]?(this._BOMseen=!0,b.shift()):0<b.length&&(this._BOMseen=!0));d="";for(c=0;c<b.length;++c){var g=b[c];65535>=g?d+=String.fromCharCode(g):(g-=65536,d+=String.fromCharCode((g>>10)+55296,(g&1023)+56320))}return d};Object.defineProperty&&Object.defineProperty(B.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}});B.prototype.encode=function(a,f){a=a?String(a):"";f=A(f);this._do_not_flush||(this._encoder=q[this._encoding.name]({fatal:"fatal"===this._fatal}));this._do_not_flush=
Boolean(f.stream);for(var b=String(a),d=b.length,c=0,g=[];c<d;){var e=b.charCodeAt(c);if(55296>e||57343<e)g.push(e);else if(56320<=e&&57343>=e)g.push(65533);else if(55296<=e&&56319>=e)if(c===d-1)g.push(65533);else{var h=b.charCodeAt(c+1);56320<=h&&57343>=h?(g.push(65536+((e&1023)<<10)+(h&1023)),c+=1):g.push(65533)}c+=1}b=new D(g);for(d=[];;){c=b.read();if(-1===c)break;c=this._encoder.handler(b,c);if(-1===c)break;Array.isArray(c)?d.push.apply(d,c):d.push(c)}if(!this._do_not_flush){for(;;){c=this._encoder.handler(b,
b.read());if(-1===c)break;Array.isArray(c)?d.push.apply(d,c):d.push(c)}this._encoder=null}return new Uint8Array(d)};q["UTF-8"]=function(a){return new M(a)};n["UTF-8"]=function(a){return new L(a)};(function(){"encoding-indexes"in r&&K.forEach(function(a){"Legacy single-byte encodings"===a.heading&&a.encodings.forEach(function(a){a=a.name;var b=p(a.toLowerCase());n[a]=function(a){return new N(b,a)};q[a]=function(a){return new O(b,a)}})})})();n.GBK=function(a){return new G(a)};q.GBK=function(a){return new H(a,
!0)};q.gb18030=function(a){return new H(a)};n.gb18030=function(a){return new G(a)};q.Big5=function(a){return new Q(a)};n.Big5=function(a){return new P(a)};q["EUC-JP"]=function(a){return new S(a)};n["EUC-JP"]=function(a){return new R(a)};q["ISO-2022-JP"]=function(a){return new U(a)};n["ISO-2022-JP"]=function(a){return new T(a)};q.Shift_JIS=function(a){return new W(a)};n.Shift_JIS=function(a){return new V(a)};q["EUC-KR"]=function(a){return new Y(a)};n["EUC-KR"]=function(a){return new X(a)};q["UTF-16BE"]=
function(a){return new J(!0,a)};n["UTF-16BE"]=function(a){return new I(!0,a)};q["UTF-16LE"]=function(a){return new J(!1,a)};n["UTF-16LE"]=function(a){return new I(!1,a)};q["x-user-defined"]=function(a){return new aa(a)};n["x-user-defined"]=function(a){return new Z(a)};r.TextEncoder||(r.TextEncoder=B);r.TextDecoder||(r.TextDecoder=z);"undefined"!==typeof module&&module.exports&&(module.exports={TextEncoder:r.TextEncoder,TextDecoder:r.TextDecoder,EncodingIndexes:r["encoding-indexes"]})})(this);